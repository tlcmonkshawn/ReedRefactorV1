services:
  - type: web
    name: reed-refactor-v1-backend
    env: ruby
    buildCommand: bundle install --deployment --without development test
    startCommand: bundle exec puma -C config/puma.rb
    plan: starter
    region: oregon
    healthCheckPath: /health
    envVars:
      - key: RAILS_ENV
        value: production
      # NOTE: Set these secrets in Render Dashboard -> Environment Variables
      # Do NOT commit actual secrets to git
      - key: SECRET_KEY_BASE
        sync: false  # Set manually in Render Dashboard
      - key: JWT_SECRET_KEY
        sync: false  # Set manually in Render Dashboard
      # Google Cloud Storage Configuration (see docs/storage/SETUP.md)
      - key: GOOGLE_CLOUD_PROJECT_ID
        sync: false  # Set manually in Render Dashboard
      - key: GOOGLE_CLOUD_STORAGE_BUCKET
        sync: false  # Set manually in Render Dashboard
      - key: GOOGLE_APPLICATION_CREDENTIALS_JSON
        sync: false  # Set manually in Render Dashboard (full JSON as string)
      # AI Configuration
      - key: GEMINI_API_KEY
        sync: false  # Set manually in Render Dashboard
      # Admin Configuration
      - key: ADMIN_PASSWORD
        sync: false  # Set manually in Render Dashboard
      # DATABASE_URL is set manually (see DATABASE_CONNECTION_SET.md)
  
  - type: pg
    name: reed-refactor-v1-db
    plan: basic_256mb
    region: oregon
    # Database will be automatically linked to the web service above
    # DATABASE_URL will be auto-injected with ?sslmode=require

